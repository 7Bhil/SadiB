import{_ as w,o as B,c as o,a as e,i as V,w as N,F as c,r as u,b as f,d as O,e as r,h as m,t as a,n as g,g as y,y as E,l as h}from"./index-2xmsqn-t.js";const F={class:"orders-view"},L={class:"orders-content"},q={class:"container"},z={key:0,class:"loading-state"},D={key:1,class:"empty-state"},I={key:2,class:"orders-list"},j={class:"order-header"},T={class:"order-info"},A={class:"order-date"},M={class:"order-status"},$={class:"order-items"},J={class:"item-details"},R={class:"item-category"},U={class:"item-quantity"},X={class:"item-price"},H={class:"order-summary"},P={class:"summary-line"},Q={class:"summary-line"},W={class:"order-timeline"},G={class:"timeline"},K={class:"timeline-content"},Y={key:0,class:"timeline-date"},Z={class:"order-actions"},ee=["onClick"],se=["href"],te={__name:"OrdersView",setup(ne){const l=f([]),p=f(!0),v=(t,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s}).format(t),_=t=>new Date(t).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=t=>({pending:"En attente",confirmed:"Confirmée",preparing:"En préparation",shipped:"Expédiée",delivered:"Livrée",cancelled:"Annulée"})[t]||t,k=t=>`status-${t}`,C=t=>{const s=[{title:"Commande créée",description:"Votre commande a été reçue",completed:!0,current:t==="pending"},{title:"Confirmée",description:"Commande confirmée par SadiB",completed:["confirmed","preparing","shipped","delivered"].includes(t),current:t==="confirmed"},{title:"En préparation",description:"Vos bijoux sont en préparation",completed:["preparing","shipped","delivered"].includes(t),current:t==="preparing"},{title:"Expédiée",description:"Votre commande est en route",completed:["shipped","delivered"].includes(t),current:t==="shipped"},{title:"Livrée",description:"Commande livrée avec succès",completed:t==="delivered",current:t==="delivered"}];return t==="cancelled"?s.slice(0,1).concat([{title:"Annulée",description:"La commande a été annulée",completed:!0,current:!0}]):s},S=async t=>{if(confirm("Êtes-vous sûr de vouloir annuler cette commande ?"))try{const s=JSON.parse(localStorage.getItem("sadiB-orders")||"[]"),d=s.findIndex(n=>n.id===t);if(d>-1){s[d].status="cancelled",localStorage.setItem("sadiB-orders",JSON.stringify(s)),l.value=s;const n=`Bonjour, je souhaite annuler ma commande ${t}.`;window.open(h(n),"_blank")}}catch(s){console.error("Erreur lors de l'annulation:",s),alert("Une erreur est survenue. Veuillez réessayer.")}};return B(()=>{setTimeout(()=>{l.value=JSON.parse(localStorage.getItem("sadiB-orders")||"[]"),p.value=!1},1e3)}),(t,s)=>{const d=O("router-link");return r(),o("div",F,[s[12]||(s[12]=e("section",{class:"page-header"},[e("div",{class:"container"},[e("span",{class:"eyebrow"},"Suivi"),e("h2",null,"Mes Commandes"),e("p",null,"Suivez l'état de vos commandes SadiB")])],-1)),e("section",L,[e("div",q,[p.value?(r(),o("div",z,[...s[0]||(s[0]=[e("div",{class:"luxury-loader"},[e("i",{class:"fas fa-gem gold-shimmer"}),e("p",null,"Chargement de vos commandes...")],-1)])])):l.value.length===0?(r(),o("div",D,[s[2]||(s[2]=e("div",{class:"empty-icon"},[e("i",{class:"fas fa-clipboard-list"})],-1)),s[3]||(s[3]=e("h3",null,"Vous n'avez pas encore de commande",-1)),s[4]||(s[4]=e("p",null,"Découvrez nos créations exclusives et passez votre première commande.",-1)),V(d,{to:"/boutique",class:"btn btn-gold"},{default:N(()=>[...s[1]||(s[1]=[e("i",{class:"fas fa-gem"},null,-1),m(" Découvrir la boutique ",-1)])]),_:1})])):(r(),o("div",I,[(r(!0),o(c,null,u(l.value,n=>(r(),o("div",{key:n.id,class:"order-card"},[e("div",j,[e("div",T,[e("h3",null,"Commande "+a(n.id),1),e("p",A,a(_(n.date)),1)]),e("div",M,[e("span",{class:g(["status-badge",k(n.status)])},a(b(n.status)),3)])]),e("div",$,[(r(!0),o(c,null,u(n.items,i=>(r(),o("div",{key:i.id,class:"order-item"},[s[5]||(s[5]=e("div",{class:"item-image"},[e("div",{class:"image-placeholder"},[e("i",{class:"fas fa-gem"})])],-1)),e("div",J,[e("h4",null,a(i.name),1),e("p",R,a(i.category),1),e("p",U,"Quantité: "+a(i.quantity),1)]),e("div",X,a(v(i.price*i.quantity,i.currency)),1)]))),128))]),e("div",H,[e("div",P,[s[6]||(s[6]=e("span",null,"Total commande:",-1)),e("span",null,a(v(n.total,"XOF")),1)]),e("div",Q,[s[7]||(s[7]=e("span",null,"Livraison:",-1)),e("span",null,a(n.delivery.address),1)])]),e("div",W,[s[9]||(s[9]=e("h4",null,"Historique",-1)),e("div",G,[(r(!0),o(c,null,u(C(n.status),(i,x)=>(r(),o("div",{key:x,class:g(["timeline-item",{active:i.completed,current:i.current}])},[s[8]||(s[8]=e("div",{class:"timeline-dot"},null,-1)),e("div",K,[e("h5",null,a(i.title),1),e("p",null,a(i.description),1),i.date?(r(),o("span",Y,a(_(i.date)),1)):y("",!0)])],2))),128))])]),e("div",Z,[n.status==="pending"?(r(),o("button",{key:0,class:"btn btn-outline",onClick:i=>S(n.id)},[...s[10]||(s[10]=[e("i",{class:"fas fa-times"},null,-1),m(" Annuler la commande ",-1)])],8,ee)):y("",!0),e("a",{href:E(h)(`Bonjour, je souhaite suivre ma commande ${n.id}`),target:"_blank",class:"btn btn-gold"},[...s[11]||(s[11]=[e("i",{class:"fab fa-whatsapp"},null,-1),m(" Contacter SadiB ",-1)])],8,se)])]))),128))]))])])])}}},oe=w(te,[["__scopeId","data-v-cbfa2b10"]]);export{oe as default};
