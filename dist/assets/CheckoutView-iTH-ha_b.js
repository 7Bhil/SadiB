import{_ as k,u as x,c as p,a as s,F as O,r as V,t as a,p as $,q as l,v as m,s as _,h as g,i as D,w as F,k as b,b as N,d as I,x as X,e as c,l as A}from"./index-2xmsqn-t.js";const C={class:"checkout-view"},L={class:"checkout-content"},U={class:"container"},q={class:"checkout-grid"},E={class:"order-summary"},T={class:"summary-items"},B={class:"item-info"},R={class:"item-name"},j={class:"item-quantity"},z={class:"item-price"},G={class:"summary-totals"},J={class:"total-line"},W={class:"total-line final"},P={class:"checkout-form"},Y={class:"form-section"},H={class:"form-group"},K={class:"form-group"},Q={class:"form-section"},Z={class:"form-group"},ee={class:"form-section"},se={class:"delivery-options"},te={class:"delivery-option"},oe={class:"delivery-option"},ne={class:"form-section"},ae={class:"form-group"},le={class:"form-actions"},re=["disabled"],ie={key:0,class:"fas fa-spinner fa-spin"},de={key:1,class:"fab fa-whatsapp"},ue={__name:"CheckoutView",setup(pe){const S=X(),f=x(),y=b(()=>f.items),v=b(()=>f.total),r=N(!1),t=N({fullName:"",phone:"",address:"",deliveryMethod:"standard",notes:""}),i=(n,e="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(n),M=()=>{const n=new Date,e=n.getFullYear(),d=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0"),h=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`SADIB-${e}${d}${o}-${h}`},w=async()=>{try{r.value=!0;const n=M();let e=`ðŸŒŸ *NOUVELLE COMMANDE SADIB* ðŸŒŸ

`;e+=`ðŸ“‹ *NumÃ©ro:* ${n}
`,e+=`ðŸ“… *Date:* ${new Date().toLocaleDateString("fr-FR")}

`,e+=`ðŸ‘¤ *CLIENT:*
`,e+=`${t.value.fullName}
`,e+=`ðŸ“± ${t.value.phone}

`,e+=`ðŸ“ *LIVRAISON:*
`,e+=`${t.value.address}
`,e+=`Mode: ${t.value.deliveryMethod==="express"?"Express (24-48h)":"Standard (3-5j)"}

`,e+=`ðŸ›ï¸ *COMMANDE:*
`,y.value.forEach(u=>{e+=`â€¢ ${u.name} (x${u.quantity}) - ${i(u.price*u.quantity,u.currency)}
`}),e+=`
ðŸ’° *TOTAL: ${i(v.value,"XOF")}*

`,t.value.notes&&(e+=`ðŸ“ *Notes:* ${t.value.notes}

`),e+="ðŸŽ‰ *Merci pour votre confiance!*";const d={id:n,date:new Date().toISOString(),customer:{name:t.value.fullName,phone:t.value.phone},delivery:{address:t.value.address,method:t.value.deliveryMethod},items:y.value,total:v.value,status:"pending",notes:t.value.notes},o=JSON.parse(localStorage.getItem("sadiB-orders")||"[]");o.unshift(d),localStorage.setItem("sadiB-orders",JSON.stringify(o));const h=A(e);window.open(h,"_blank"),f.clearCart(),S.push({name:"order-confirmation",params:{id:n}})}catch(n){console.error("Erreur lors de la soumission:",n),alert("Une erreur est survenue. Veuillez rÃ©essayer.")}finally{r.value=!1}};return(n,e)=>{const d=I("router-link");return c(),p("div",C,[e[21]||(e[21]=s("section",{class:"page-header"},[s("div",{class:"container"},[s("span",{class:"eyebrow"},"Finalisation"),s("h2",null,"Finaliser votre Commande"),s("p",null,"DerniÃ¨re Ã©tape avant de recevoir vos crÃ©ations SadiB")])],-1)),s("section",L,[s("div",U,[s("div",q,[s("div",E,[e[9]||(e[9]=s("h3",null,"RÃ©capitulatif de la commande",-1)),s("div",T,[(c(!0),p(O,null,V(y.value,o=>(c(),p("div",{key:o.id,class:"summary-item"},[s("div",B,[s("span",R,a(o.name),1),s("span",j,"x"+a(o.quantity),1)]),s("span",z,a(i(o.price*o.quantity,o.currency)),1)]))),128))]),s("div",G,[s("div",J,[e[6]||(e[6]=s("span",null,"Sous-total",-1)),s("span",null,a(i(v.value,"XOF")),1)]),e[8]||(e[8]=s("div",{class:"total-line"},[s("span",null,"Livraison"),s("span",null,"Gratuite")],-1)),s("div",W,[e[7]||(e[7]=s("span",null,"Total",-1)),s("span",null,a(i(v.value,"XOF")),1)])])]),s("div",P,[s("form",{onSubmit:$(w,["prevent"])},[s("div",Y,[e[12]||(e[12]=s("h3",null,"Informations de contact",-1)),s("div",H,[e[10]||(e[10]=s("label",{for:"fullName"},"Nom complet *",-1)),l(s("input",{type:"text",id:"fullName","onUpdate:modelValue":e[0]||(e[0]=o=>t.value.fullName=o),required:"",placeholder:"Votre nom et prÃ©nom",class:"form-input"},null,512),[[m,t.value.fullName]])]),s("div",K,[e[11]||(e[11]=s("label",{for:"phone"},"TÃ©lÃ©phone *",-1)),l(s("input",{type:"tel",id:"phone","onUpdate:modelValue":e[1]||(e[1]=o=>t.value.phone=o),required:"",placeholder:"+229 XX XX XX XX",class:"form-input"},null,512),[[m,t.value.phone]])])]),s("div",Q,[e[15]||(e[15]=s("h3",null,"Adresse de livraison",-1)),s("div",Z,[e[13]||(e[13]=s("label",{for:"address"},"Adresse complÃ¨te (optionnel)",-1)),l(s("textarea",{id:"address","onUpdate:modelValue":e[2]||(e[2]=o=>t.value.address=o),rows:"3",class:"form-input",placeholder:"NumÃ©ro, rue, quartier, ville... (Optionnel - nous vous contacterons par tÃ©lÃ©phone)"},null,512),[[m,t.value.address]]),e[14]||(e[14]=s("small",{class:"form-hint"},"Si vous ne remplissez pas ce champ, nous vous contacterons par tÃ©lÃ©phone pour confirmer votre adresse.",-1))])]),s("div",ee,[e[18]||(e[18]=s("h3",null,"Mode de livraison",-1)),s("div",se,[s("label",te,[l(s("input",{type:"radio",name:"delivery",value:"standard","onUpdate:modelValue":e[3]||(e[3]=o=>t.value.deliveryMethod=o),checked:""},null,512),[[_,t.value.deliveryMethod]]),e[16]||(e[16]=s("div",{class:"option-content"},[s("span",{class:"option-title"},"Livraison standard"),s("span",{class:"option-desc"},"3-5 jours ouvrÃ©s"),s("span",{class:"option-price"},"Gratuite")],-1))]),s("label",oe,[l(s("input",{type:"radio",name:"delivery",value:"express","onUpdate:modelValue":e[4]||(e[4]=o=>t.value.deliveryMethod=o)},null,512),[[_,t.value.deliveryMethod]]),e[17]||(e[17]=s("div",{class:"option-content"},[s("span",{class:"option-title"},"Livraison express"),s("span",{class:"option-desc"},"24-48h"),s("span",{class:"option-price"},"2 000 XOF")],-1))])])]),s("div",ne,[e[19]||(e[19]=s("h3",null,"Notes de commande",-1)),s("div",ae,[l(s("textarea",{id:"notes","onUpdate:modelValue":e[5]||(e[5]=o=>t.value.notes=o),rows:"3",class:"form-input",placeholder:"Instructions spÃ©ciales pour votre commande..."},null,512),[[m,t.value.notes]])])]),s("div",le,[s("button",{type:"submit",class:"btn btn-gold btn-large",disabled:r.value},[r.value?(c(),p("i",ie)):(c(),p("i",de)),g(" "+a(r.value?"Traitement...":"Finaliser sur WhatsApp"),1)],8,re),D(d,{to:"/panier",class:"btn btn-outline"},{default:F(()=>[...e[20]||(e[20]=[g(" Retour au panier ",-1)])]),_:1})])],32)])])])])])}}},ve=k(ue,[["__scopeId","data-v-52efeee9"]]);export{ve as default};
